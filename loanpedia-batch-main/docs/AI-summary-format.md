# AI 要約フォーマット仕様書

## 概要

本仕様書は、ローン情報を生成 AI で処理する際の標準フォーマットを定義します。
統一されたフォーマットにより、エンドユーザーが複数の金融機関のローン情報を効率的に比較・検討できることを目的とします。

## フォーマット仕様

### 1. 基本構造

```json
{
  "loan_summary": {
    "basic_info": {
      "product_name": "商品名",
      "institution_name": "金融機関名",
      "loan_type": "ローン種別",
      "summary": "商品の概要（1-2文）"
    },
    "key_conditions": {
      "interest_rate": {
        "type": "金利種別（固定/変動）",
        "rate": "金利（%）"
      },
      "loan_amount": {
        "min": "最小融資額",
        "max": "最大融資額",
        "unit": "通貨単位"
      },
      "loan_term": {
        "min": "最短期間",
        "max": "最長期間",
        "unit": "期間単位（年/月）"
      }
    },
    "application_requirements": {
      "age": "年齢制限",
      "others": ["その他の条件"]
    }
  },
  "metadata": {
    "source_url": "情報源URL",
    "scraped_at": "取得日時",
    "processed_at": "処理日時",
    "ai_model": "使用AIモデル"
  }
}
```

### 2. フィールド詳細仕様

#### 2.1 basic_info（基本情報）

| フィールド       | 型     | 必須 | 説明                                 |
| ---------------- | ------ | ---- | ------------------------------------ |
| product_name     | string | ○    | ローン商品の正式名称                 |
| institution_name | string | ○    | 金融機関名（略称可）                 |
| loan_type        | string | ○    | 住宅ローン、カードローン、事業資金等 |
| summary          | string | ○    | 商品概要（50-100 文字程度）          |

#### 2.2 key_conditions（主要条件）

##### interest_rate（金利情報）

| フィールド | 型     | 必須 | 説明                                  |
| ---------- | ------ | ---- | ------------------------------------- |
| type       | string | ○    | "固定", "変動", "固定選択" のいずれか |
| rate       | string | ○    | 金利（例: "1.5%", "1.2-2.8%"）        |

##### loan_amount（融資額）

| フィールド | 型     | 必須 | 説明               |
| ---------- | ------ | ---- | ------------------ |
| min        | number | ○    | 最小融資額（数値） |
| max        | number | ○    | 最大融資額（数値） |
| unit       | string | ○    | "万円", "円"       |

##### loan_term（融資期間）

| フィールド | 型     | 必須 | 説明             |
| ---------- | ------ | ---- | ---------------- |
| min        | number | ○    | 最短期間（数値） |
| max        | number | ○    | 最長期間（数値） |
| unit       | string | ○    | "年", "月"       |

#### 2.3 application_requirements（申込要件）

| フィールド | 型     | 必須 | 説明                       |
| ---------- | ------ | ---- | -------------------------- |
| age        | string | △    | 年齢制限（例: "20-65 歳"） |
| others     | array  | △    | その他の条件（配列）       |

#### 2.4 metadata（メタデータ）

| フィールド   | 型     | 必須 | 説明                             |
| ------------ | ------ | ---- | -------------------------------- |
| source_url   | string | ○    | 情報源 URL                       |
| scraped_at   | string | ○    | データ取得日時（ISO 8601 形式）  |
| processed_at | string | ○    | AI 処理実行日時（ISO 8601 形式） |
| ai_model     | string | ○    | 使用した AI モデル名             |

### 3. サンプルデータ

```json
{
  "loan_summary": {
    "basic_info": {
      "product_name": "みちのく住宅ローン",
      "institution_name": "青森みちのく銀行",
      "loan_type": "住宅ローン",
      "summary": "新築・中古住宅購入、住宅建築資金向けの長期固定金利住宅ローンです。"
    },
    "key_conditions": {
      "interest_rate": {
        "type": "固定選択",
        "rate": "1.2-2.8%",
        "conditions": "固定期間選択後は変動金利に移行"
      },
      "loan_amount": {
        "min": 100,
        "max": 8000,
        "unit": "万円"
      },
      "loan_term": {
        "min": 1,
        "max": 35,
        "unit": "年"
      },
      "repayment_method": "元利均等返済・元金均等返済"
    },
    "application_requirements": {
      "age": "20-70歳",
      "income": "年収300万円以上",
      "employment": "安定継続収入",
      "others": ["青森県内居住", "団体信用生命保険加入"]
    },
    "highlights": {
      "advantages": ["地域密着型サービス", "柔軟な審査", "低金利"],
      "special_features": ["がん保障特約付き", "繰上返済手数料無料"],
      "notes": ["物件所在地制限あり", "保証料別途必要"]
    },
    "metadata": {
      "source_url": "https://www.am-bk.co.jp/loan/housing",
      "scraped_at": "2024-07-22T10:30:00+09:00",
      "processed_at": "2024-07-22T10:35:00+09:00",
      "ai_model": "bedrock-claude-3.5-sonnet"
    }
  }
}
```

### 4. AI 処理ガイドライン

#### 4.1 データ抽出原則

1. **正確性優先**: 明記されていない情報は推測しない
2. **簡潔性**: 重要な情報を簡潔にまとめる
3. **統一性**: 同じ種類の情報は統一した形式で表現する
4. **透明性**: 情報源を明確にし、処理過程を記録する

#### 4.2 フィールド記入ルール

- 必須フィールド（○）: 情報が見つからない場合は "情報なし" と記載
- 任意フィールド（△）: 情報がない場合は省略可能
- 数値データ: 範囲がある場合は最小値・最大値を分離して記載
- 配列データ: 複数の項目がある場合は配列として整理

#### 4.3 品質管理

1. **データ検証**: 必須フィールドの存在チェック
2. **形式検証**: JSON 形式の妥当性チェック
3. **内容検証**: 数値の範囲、日時形式等の妥当性チェック

### 5. 運用ルール

#### 5.1 更新頻度

- 月次でデータ更新を実行
- 金融機関側の情報更新を検知した場合は随時更新

#### 5.2 バージョン管理

- フォーマット仕様の変更時はバージョン番号を更新
- 下位互換性を考慮した変更を心がける

#### 5.3 エラーハンドリング

- AI 処理エラー時の対応手順を定める
- 不完全なデータの扱い方を明確化

## 変更履歴

| バージョン | 日付       | 変更内容 |
| ---------- | ---------- | -------- |
| 1.0.0      | 2025-07-22 | 初版作成 |
